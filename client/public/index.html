<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Translator 🐾</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Poppins:wght@300;400;600;700&display=swap');
        
        .funky-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .animal-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            transform: perspective(1000px) rotateX(2deg);
            transition: all 0.3s ease;
        }
        
        .animal-card:hover {
            transform: perspective(1000px) rotateX(0deg) scale(1.02);
        }
        
        .pulse-ring {
            animation: pulse-ring 2s infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }
        
        .bounce-in {
            animation: bounce-in 0.6s ease-out;
        }
        
        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .wiggle {
            animation: wiggle 1s ease-in-out infinite;
        }
        
        @keyframes wiggle {
            0%, 7% { transform: rotateZ(0); }
            15% { transform: rotateZ(-15deg); }
            20% { transform: rotateZ(10deg); }
            25% { transform: rotateZ(-10deg); }
            30% { transform: rotateZ(6deg); }
            35% { transform: rotateZ(-4deg); }
            40%, 100% { transform: rotateZ(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        function AnimalTranslator() {
            const [isRecording, setIsRecording] = useState(false);
            const [audioBlob, setAudioBlob] = useState(null);
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [result, setResult] = useState(null);
            const [error, setError] = useState(null);
            
            const mediaRecorderRef = useRef(null);
            const audioChunksRef = useRef([]);

            const startRecording = async () => {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorderRef.current = new MediaRecorder(stream);
                    audioChunksRef.current = [];

                    mediaRecorderRef.current.ondataavailable = (event) => {
                        audioChunksRef.current.push(event.data);
                    };

                    mediaRecorderRef.current.onstop = () => {
                        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });
                        setAudioBlob(audioBlob);
                        stream.getTracks().forEach(track => track.stop());
                    };

                    mediaRecorderRef.current.start();
                    setIsRecording(true);
                    setError(null);
                    setResult(null);
                } catch (err) {
                    setError('Microphone access denied! 🎤❌');
                }
            };

            const stopRecording = () => {
                if (mediaRecorderRef.current && isRecording) {
                    mediaRecorderRef.current.stop();
                    setIsRecording(false);
                }
            };

            const translateAudio = async () => {
                if (!audioBlob) return;

                setIsAnalyzing(true);
                setError(null);

                try {
                    // Convert audio blob to base64 for sending to backend
                    const reader = new FileReader();
                    reader.onloadend = async () => {
                        const base64Audio = reader.result.split(',')[1];
                        
                        // Simulate API call (replace with your backend URL)
                        const response = await fetch('/api/translate', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ audioData: base64Audio })
                        });

                        if (!response.ok) {
                            throw new Error('Translation failed');
                        }

                        const data = await response.json();
                        setResult(data);
                        setIsAnalyzing(false);
                    };
                    reader.readAsDataURL(audioBlob);
                } catch (err) {
                    // Mock response for demo purposes
                    setTimeout(() => {
                        const mockAnimals = [
                            {
                                animalType: 'dog',
                                dialog: "Woof! I've been waiting ALL DAY for you to come home! Did you bring treats? Please tell me you brought treats! 🐕",
                                emotion: 'excited',
                                memeImageURL: '/placeholder-dog-meme.jpg',
                                audioURL: '/placeholder-dog-response.mp3'
                            },
                            {
                                animalType: 'cat',
                                dialog: "Meow... *sigh* I suppose you expect me to be grateful that you're finally paying attention to me. Fine. Pet me. Now. 😾",
                                emotion: 'sassy',
                                memeImageURL: '/placeholder-cat-meme.jpg',
                                audioURL: '/placeholder-cat-response.mp3'
                            },
                            {
                                animalType: 'bird',
                                dialog: "SQUAWK! The humans are up to something suspicious again! I must alert the neighborhood! DANGER! DANGER! 🦜",
                                emotion: 'dramatic',
                                memeImageURL: '/placeholder-bird-meme.jpg',
                                audioURL: '/placeholder-bird-response.mp3'
                            },
                            {
                                animalType: 'human',
                                dialog: "Random animal detected... Go away, imposter! 🕵️‍♂️",
                                emotion: 'exposed',
                                memeImageURL: '/placeholder-imposter-meme.jpg',
                                audioURL: '/placeholder-exposed-sound.mp3'
                            }
                        ];
                        
                        const randomResult = mockAnimals[Math.floor(Math.random() * mockAnimals.length)];
                        setResult(randomResult);
                        setIsAnalyzing(false);
                    }, 2000);
                }
            };

            const resetTranslator = () => {
                setAudioBlob(null);
                setResult(null);
                setError(null);
            };

            const getAnimalEmoji = (animalType) => {
                const emojis = {
                    dog: '🐕',
                    cat: '🐱',
                    bird: '🦜',
                    cow: '🐄',
                    pig: '🐷',
                    horse: '🐴',
                    sheep: '🐑',
                    human: '🕵️‍♂️'
                };
                return emojis[animalType] || '🐾';
            };

            return (
                <div className="min-h-screen funky-gradient p-4">
                    <div className="max-w-4xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <h1 className="text-6xl font-bold text-white mb-4" style={{fontFamily: 'Fredoka One, cursive'}}>
                                Animal Translator 🐾
                            </h1>
                            <p className="text-xl text-white/90 font-medium">
                                What is your pet really thinking? Let's find out! 🎤✨
                            </p>
                        </div>

                        {/* Main Card */}
                        <div className="bg-white rounded-3xl shadow-2xl p-8 mb-8">
                            {!result && (
                                <div className="text-center">
                                    {!isRecording && !audioBlob && (
                                        <div className="space-y-6">
                                            <div className="text-6xl wiggle">🎤</div>
                                            <h2 className="text-3xl font-bold text-gray-800 mb-4">
                                                Ready to Translate?
                                            </h2>
                                            <p className="text-lg text-gray-600 mb-8">
                                                Hold the button and let your animal speak their mind!
                                            </p>
                                            <button
                                                onClick={startRecording}
                                                className="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-12 py-6 rounded-full text-xl font-bold hover:from-pink-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-300 shadow-lg"
                                            >
                                                🎙️ Start Recording
                                            </button>
                                        </div>
                                    )}

                                    {isRecording && (
                                        <div className="space-y-6">
                                            <div className="relative inline-block">
                                                <div className="text-6xl animate-pulse">🔴</div>
                                                <div className="absolute inset-0 rounded-full pulse-ring bg-red-400"></div>
                                            </div>
                                            <h2 className="text-3xl font-bold text-red-600">
                                                Recording... 🎤
                                            </h2>
                                            <p className="text-lg text-gray-600">
                                                Listening to your animal friend...
                                            </p>
                                            <button
                                                onClick={stopRecording}
                                                className="bg-red-500 text-white px-12 py-6 rounded-full text-xl font-bold hover:bg-red-600 transform hover:scale-105 transition-all duration-300 shadow-lg"
                                            >
                                                ⏹️ Stop Recording
                                            </button>
                                        </div>
                                    )}

                                    {audioBlob && !isAnalyzing && (
                                        <div className="space-y-6">
                                            <div className="text-6xl bounce-in">✅</div>
                                            <h2 className="text-3xl font-bold text-green-600">
                                                Audio Captured!
                                            </h2>
                                            <p className="text-lg text-gray-600">
                                                Ready to decode what they're saying?
                                            </p>
                                            <div className="space-x-4">
                                                <button
                                                    onClick={translateAudio}
                                                    className="bg-gradient-to-r from-green-500 to-blue-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:from-green-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-300 shadow-lg"
                                                >
                                                    🔮 Translate Now!
                                                </button>
                                                <button
                                                    onClick={resetTranslator}
                                                    className="bg-gray-500 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300"
                                                >
                                                    🔄 Try Again
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {isAnalyzing && (
                                        <div className="space-y-6">
                                            <div className="text-6xl animate-spin">🔮</div>
                                            <h2 className="text-3xl font-bold text-purple-600">
                                                Analyzing...
                                            </h2>
                                            <p className="text-lg text-gray-600">
                                                Our AI is decoding the secret animal language... 🤖
                                            </p>
                                            <div className="flex justify-center">
                                                <div className="animate-pulse flex space-x-2">
                                                    <div className="w-3 h-3 bg-purple-500 rounded-full"></div>
                                                    <div className="w-3 h-3 bg-pink-500 rounded-full"></div>
                                                    <div className="w-3 h-3 bg-blue-500 rounded-full"></div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {result && (
                                <div className="space-y-6 bounce-in">
                                    {result.animalType === 'human' ? (
                                        <div className="text-center space-y-6">
                                            <div className="text-6xl">🚨</div>
                                            <h2 className="text-3xl font-bold text-red-600">
                                                IMPOSTER ALERT! 🕵️‍♂️
                                            </h2>
                                            <div className="animal-card rounded-2xl p-6 border-4 border-red-500">
                                                <p className="text-xl font-bold text-red-700 mb-4">
                                                    "{result.dialog}"
                                                </p>
                                                <div className="bg-red-100 rounded-lg p-4 mb-4">
                                                    <p className="text-red-700 font-medium">🖼️ Meme Image Placeholder</p>
                                                    <p className="text-sm text-red-500">Add your custom "exposed" meme here: {result.memeImageURL}</p>
                                                </div>
                                                <div className="bg-red-100 rounded-lg p-4">
                                                    <p className="text-red-700 font-medium">🔊 Exposed Sound Effect</p>
                                                    <p className="text-sm text-red-500">Audio file: {result.audioURL}</p>
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center space-y-6">
                                            <div className="text-6xl">{getAnimalEmoji(result.animalType)}</div>
                                            <h2 className="text-3xl font-bold text-gray-800 capitalize">
                                                {result.animalType} Translation Complete!
                                            </h2>
                                            <div className="animal-card rounded-2xl p-6">
                                                <div className="text-2xl mb-4">💬</div>
                                                <p className="text-xl font-bold text-gray-800 mb-6 leading-relaxed">
                                                    "{result.dialog}"
                                                </p>
                                                
                                                <div className="grid md:grid-cols-2 gap-4 mb-6">
                                                    <div className="bg-yellow-50 rounded-lg p-4">
                                                        <p className="text-yellow-700 font-medium mb-2">🖼️ Meme Response</p>
                                                        <p className="text-sm text-yellow-600">Custom meme placeholder: {result.memeImageURL}</p>
                                                    </div>
                                                    <div className="bg-blue-50 rounded-lg p-4">
                                                        <p className="text-blue-700 font-medium mb-2">🔊 Audio Response</p>
                                                        <p className="text-sm text-blue-600">Audio file: {result.audioURL}</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="inline-block bg-gradient-to-r from-purple-100 to-pink-100 px-4 py-2 rounded-full">
                                                    <span className="text-purple-700 font-medium">Emotion: {result.emotion}</span>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    
                                    <button
                                        onClick={resetTranslator}
                                        className="bg-gradient-to-r from-orange-500 to-red-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:from-orange-600 hover:to-red-700 transform hover:scale-105 transition-all duration-300 shadow-lg"
                                    >
                                        🔄 Translate Another Animal
                                    </button>
                                </div>
                            )}

                            {error && (
                                <div className="text-center space-y-4">
                                    <div className="text-6xl">⚠️</div>
                                    <p className="text-xl text-red-600 font-bold">{error}</p>
                                    <button
                                        onClick={resetTranslator}
                                        className="bg-red-500 text-white px-6 py-3 rounded-full font-bold hover:bg-red-600 transition-colors"
                                    >
                                        Try Again
                                    </button>
                                </div>
                            )}
                        </div>

                        {/* Fun Facts Section */}
                        <div className="bg-white/20 backdrop-blur-sm rounded-2xl p-6 text-white">
                            <h3 className="text-2xl font-bold mb-4 text-center">🎯 Pro Tips</h3>
                            <div className="grid md:grid-cols-3 gap-4 text-center">
                                <div className="space-y-2">
                                    <div className="text-3xl">🐕</div>
                                    <p className="font-medium">Dogs are usually excited or demanding treats!</p>
                                </div>
                                <div className="space-y-2">
                                    <div className="text-3xl">🐱</div>
                                    <p className="font-medium">Cats are typically sarcastic and judgmental!</p>
                                </div>
                                <div className="space-y-2">
                                    <div className="text-3xl">🦜</div>
                                    <p className="font-medium">Birds love being dramatic and loud!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<AnimalTranslator />, document.getElementById('root'));
    </script>
</body>
</html>